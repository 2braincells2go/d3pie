!function(a){"use strict";var b,c,d,e,f,g,h={header:{title:{color:"#333333",fontSize:"14px",font:"helvetica"},subtitle:{color:"#333333",fontSize:"14px",font:"helvetica"},location:"top-left",titleSubtitlePadding:5},footer:{text:""},size:{canvasHeight:500,canvasWidth:500,pieInnerRadius:"100%",pieOuterRadius:null},labels:{enableTooltips:!0,inner:{format:"percentage",hideWhenLessThanPercentage:null},outer:{format:"label",hideWhenLessThanPercentage:null},mainLabel:{color:"#333333",font:"Open sans",fontSize:"8"},percentage:{color:"#999999",font:"Open sans",fontSize:"8",decimalPlaces:0},value:{color:"#cccc44",font:"Open sans",fontSize:"8"},lines:{enabled:!0,style:"curved",length:16,color:"segment"}},effects:{load:{effect:"default",speed:1e3},pullOutSegmentOnClick:{effect:"linear",speed:400},highlightSegmentOnMouseover:!1,highlightLuminosity:-.2},tooltips:{enable:!1},misc:{colors:{background:null,segments:["#98abc5","#8a89a6","#7b6888","#6b486b","#a05d56","#d0743c","#ff8c00","#635222","#00dd00"],segmentStroke:"#ffffff"},canvasPadding:{top:5,right:5,bottom:5,left:5},footerPiePadding:0},callbacks:{onload:null,onMouseoverSegment:null,onMouseoutSegment:null,onClickSegment:null}},i={initialCheck:function(b){if(!window.d3||!window.d3.hasOwnProperty("version"))return void console.error("d3pie error: d3 is not available");if("string"==typeof b){var c=a.getElementById(b);if(null===c)return void console.error("d3pie error: a DOM element with ID not found: ",b)}else if(!(b instanceof HTMLElement))return void console.error("d3pie error: the first d3pie() param must be a valid DOM element (not jQuery) or a ID string.")}},j={addSVGSpace:function(a,b,c,f){d=d3.select(a).append("svg:svg").attr("width",b).attr("height",c),"transparent"!==e.misc.colors.background&&d.style("background-color",function(){return f})},on:function(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?a.attachEvent("on"+b,c):(b="on"+b,"function"==typeof a[b]&&(c=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}(a[b],c)),a[b]=c,!0)},whenIdExists:function(b,c){var d=1,e=1e3,f=setInterval(function(){a.getElementById(b)&&(clearInterval(f),c()),d>e&&clearInterval(f),d++},1)},whenElementsExist:function(b,c){var d=1,e=1e3,f=setInterval(function(){for(var g=!0,h=0;h<b.length;h++)if(!a.getElementById(b[h])){g=!1;break}g&&(clearInterval(f),c()),d>e&&clearInterval(f),d++},1)},extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]},shuffleArray:function(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a},processObj:function(a,b,c){return"string"==typeof b?j.processObj(a,b.split("."),c):1==b.length&&void 0!==c?a[b[0]]=c:0==b.length?a:j.processObj(a[b[0]],b.slice(1),c)},getDimensions:function(b){var c=a.getElementById(b),d=0,e=0;if(c){var f=c.getBBox();d=f.width,e=f.height}else console.log("error: getDimensions() "+b+" not found.");return{w:d,h:e}},rectIntersect:function(a,b){var c=b.x>a.x+a.w||b.x+b.w<a.x||b.y+b.h<a.y||b.y>a.y+a.h;return!c},getColorShade:function(a,b){a=String(a).replace(/[^0-9a-f]/gi,""),a.length<6&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),b=b||0;for(var c="#",d=0;3>d;d++){var e=parseInt(a.substr(2*d,2),16);e=Math.round(Math.min(Math.max(0,e+e*b),255)).toString(16),c+=("00"+e).substr(e.length)}return c},initSegmentColors:function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d].hasOwnProperty("color")?a[d].color:b[d]);return c},showPoint:function(a,b){d.append("circle").attr("cx",a).attr("cy",b).attr("r",2).style("fill","black")}},k={toRadians:function(a){return a*(Math.PI/180)},toDegrees:function(a){return a*(180/Math.PI)},computePieRadius:function(){var a,b=e.size.canvasWidth-e.misc.canvasPadding.left-e.misc.canvasPadding.right,c=e.size.canvasHeight,d=(c>b?b:c)/2.8;if(null!==e.size.pieOuterRadius)if(/%/.test(e.size.pieOuterRadius)){var f=parseInt(e.size.pieOuterRadius.replace(/[\D]/,""),10);f=f>99?99:f,f=0>f?0:f;var g=c>b?b:c;d=Math.floor(g/100*f)/2}else d=parseInt(e.size.pieOuterRadius,10);if(/%/.test(e.size.pieInnerRadius)){var f=parseInt(e.size.pieInnerRadius.replace(/[\D]/,""),10);f=f>99?99:f,f=0>f?0:f,a=Math.floor(d/100*f)}else a=parseInt(e.size.pieInnerRadius,10);return{inner:a,outer:d}},getTotalPieSize:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].value;return b},sortPieData:function(a,b){switch(b){case"none":break;case"random":a=j.shuffleArray(a);break;case"value-asc":a.sort(function(a,b){return a.value<b.value?-1:1});break;case"value-desc":a.sort(function(a,b){return a.value<b.value?1:-1});break;case"label-asc":a.sort(function(a,b){return a.label.toLowerCase()>b.label.toLowerCase()?1:-1});break;case"label-desc":a.sort(function(a,b){return a.label.toLowerCase()<b.label.toLowerCase()?1:-1})}return a},getPieTranslateCenter:function(){var a=k.getPieCenter();return"translate("+a.x+","+a.y+")"},getPieCenter:function(){var a=n.components.title.exists&&"pie-center"!==e.header.location,b=n.components.subtitle.exists&&"pie-center"!==e.header.location,c=e.misc.canvasPadding.top;a&&b?c+=n.components.title.h+e.header.titleSubtitlePadding+n.components.subtitle.h:a?c+=n.components.title.h:b&&(c=n.components.subtitle.h);var d=0;n.components.footer.exists&&(d=n.components.footer.h+e.misc.canvasPadding.bottom);var f=(e.size.canvasWidth-e.misc.canvasPadding.left-e.misc.canvasPadding.right)/2+e.misc.canvasPadding.left,g=(e.size.canvasHeight-d-c)/2+c;return f+=e.misc.pieCenterOffset.x,g+=e.misc.pieCenterOffset.y,{x:f,y:g}},arcTween:function(a){var b=d3.interpolate({value:0},a);return function(a){return c(b(a))}},rotate:function(a,b,c,d,e){var f=Math.cos,g=Math.sin,e=e*Math.PI/180,h=(a-c)*f(e)-(b-d)*g(e)+c,i=(a-c)*g(e)+(b-d)*f(e)+d;return{x:h,y:i}},translate:function(a,b,c,d){var e=k.toRadians(d);return{x:a+c*Math.sin(e),y:b-c*Math.cos(e)}},pointIsInArc:function(a,b,c){var d=c.innerRadius()(b),e=c.outerRadius()(b),f=c.startAngle()(b),g=c.endAngle()(b),h=a.x*a.x+a.y*a.y,i=Math.atan2(a.x,-a.y);return i=0>i?i+2*Math.PI:i,h>=d*d&&e*e>=h&&i>=f&&g>=i}},l={outerLabelGroupData:[],lineCoordGroups:[],add:function(a,b){var c=l.getIncludes(b),f=e.labels,g=d.insert("g",".labels-"+a).attr("class","labels-"+a),h=g.selectAll(".labelGroup-"+a).data(e.data).enter().append("g").attr("class","labelGroup-"+a).attr("id",function(b,c){return"labelGroup"+c+"-"+a}).style("opacity",0);c.mainLabel&&h.append("text").attr("class","segmentMainLabel-"+a).attr("id",function(b,c){return"segmentMainLabel"+c+"-"+a}).text(function(a){return a.label}).style("font-size",f.mainLabel.fontSize).style("font-family",f.mainLabel.font).style("fill",f.mainLabel.color),c.percentage&&h.append("text").attr("class","segmentPercentage-"+a).attr("id",function(b,c){return"segmentPercentage"+c+"-"+a}).text(function(a){var b=a.value/o*100;return b.toFixed(e.labels.percentage.decimalPlaces)+"%"}).style("font-size",f.percentage.fontSize).style("font-family",f.percentage.font).style("fill",f.percentage.color),c.value&&h.append("text").attr("class","segmentValue-"+a).attr("id",function(b,c){return"segmentValue"+c+"-"+a}).text(function(a){return a.value}).style("font-size",f.value.fontSize).style("font-family",f.value.font).style("fill",f.value.color)},positionLabelElements:function(b,c){l["dimensions-"+b]=[];for(var d=a.getElementsByClassName("labelGroup-"+b),e=0;e<d.length;e++){var f=$(d[e]).find(".segmentMainLabel-"+b),g=$(d[e]).find(".segmentPercentage-"+b),h=$(d[e]).find(".segmentValue-"+b);l["dimensions-"+b].push({mainLabel:f.length>0?f[0].getBBox():null,percentage:g.length>0?g[0].getBBox():null,value:h.length>0?h[0].getBBox():null})}var i=5,j=l["dimensions-"+b];switch(c){case"label-value1":d3.selectAll(".segmentValue-"+b).attr("dx",function(a,b){return j[b].mainLabel.width+i});break;case"label-value2":d3.selectAll(".segmentValue-"+b).attr("dy",function(a,b){return j[b].mainLabel.height});break;case"label-percentage1":d3.selectAll(".segmentPercentage-"+b).attr("dx",function(a,b){return j[b].mainLabel.width+i});break;case"label-percentage2":d3.selectAll(".segmentPercentage-"+b).attr("dx",function(a,b){return j[b].mainLabel.width/2-j[b].percentage.width/2}).attr("dy",function(a,b){return j[b].mainLabel.height})}},computeLabelLinePositions:function(){l.lineCoordGroups=[],d3.selectAll(".labelGroup-outer").each(function(a,b){return l.computeLinePosition(b)})},computeLinePosition:function(a){var b,c,d,f,h=m.getSegmentAngle(a,{midpoint:!0}),i=k.getPieCenter(),j=k.rotate(i.x,i.y-g,i.x,i.y,h),n=l.outerLabelGroupData[a].h/5,o=6,p=Math.floor(h/90),q=4;switch(p){case 0:b=l.outerLabelGroupData[a].x-o-(l.outerLabelGroupData[a].x-o-j.x)/2,c=l.outerLabelGroupData[a].y+(j.y-l.outerLabelGroupData[a].y)/q,d=l.outerLabelGroupData[a].x-o,f=l.outerLabelGroupData[a].y-n;break;case 1:b=j.x+(l.outerLabelGroupData[a].x-j.x)/q,c=j.y+(l.outerLabelGroupData[a].y-j.y)/q,d=l.outerLabelGroupData[a].x-o,f=l.outerLabelGroupData[a].y-n;break;case 2:var r=l.outerLabelGroupData[a].x+l.outerLabelGroupData[a].w+o;b=j.x-(j.x-r)/q,c=j.y+(l.outerLabelGroupData[a].y-j.y)/q,d=l.outerLabelGroupData[a].x+l.outerLabelGroupData[a].w+o,f=l.outerLabelGroupData[a].y-n;break;case 3:var s=l.outerLabelGroupData[a].x+l.outerLabelGroupData[a].w+o;b=s+(j.x-s)/q,c=l.outerLabelGroupData[a].y+(j.y-l.outerLabelGroupData[a].y)/q,d=l.outerLabelGroupData[a].x+l.outerLabelGroupData[a].w+o,f=l.outerLabelGroupData[a].y-n}l.lineCoordGroups[a]="straight"===e.labels.lines.style?[{x:j.x,y:j.y},{x:d,y:f}]:[{x:j.x,y:j.y},{x:b,y:c},{x:d,y:f}]},addLabelLines:function(){var a=d.insert("g",".pieChart").attr("class","lineGroups").style("opacity",0),b=a.selectAll(".lineGroup").data(l.lineCoordGroups).enter().append("g").attr("class","lineGroup"),c=d3.svg.line().interpolate("basis").x(function(a){return a.x}).y(function(a){return a.y});b.append("path").attr("d",c).attr("stroke",function(a,b){return"segment"===e.labels.lines.color?e.colors[b]:e.labels.lines.color}).attr("stroke-width",1).attr("fill","none").style("opacity",function(a,b){var c=e.labels.outer.hideWhenLessThanPercentage,d=m.getPercentage(b);return null!==c&&c>d?0:1})},positionLabelGroups:function(a){d3.selectAll(".labelGroup-"+a).style("opacity",0).attr("transform",function(b,c){var d,e;if("outer"===a)d=l.outerLabelGroupData[c].x,e=l.outerLabelGroupData[c].y;else{var g=k.getPieCenter();if(f>0){var h=m.getSegmentAngle(c,{midpoint:!0}),i=k.translate(g.x,g.y,f,h);g.x=i.x,g.y=i.y}var n=j.getDimensions("labelGroup"+c+"-inner"),o=n.w/2,p=n.h/4;d=g.x+(l.lineCoordGroups[c][0].x-g.x)/1.8,e=g.y+(l.lineCoordGroups[c][0].y-g.y)/1.8,d-=o,e+=p}return"translate("+d+","+e+")"})},fadeInLabelsAndLines:function(){var a="default"===e.effects.load.effect?e.effects.load.speed:1;setTimeout(function(){var a="default"===e.effects.load.effect?400:1;d3.selectAll(".labelGroup-outer").transition().duration(a).style("opacity",function(a,b){var c=e.labels.outer.hideWhenLessThanPercentage,d=m.getPercentage(b);return null!==c&&c>d?0:1}),d3.selectAll(".labelGroup-inner").transition().duration(a).style("opacity",function(a,b){var c=e.labels.inner.hideWhenLessThanPercentage,d=m.getPercentage(b);return null!==c&&c>d?0:1}),d3.selectAll("g.lineGroups").transition().duration(a).style("opacity",1),$.isFunction(e.callbacks.onload)&&setTimeout(function(){try{e.callbacks.onload()}catch(a){}},a)},a)},getIncludes:function(a){var b=!1,c=!1,d=!1;switch(a){case"label":b=!0;break;case"value":c=!0;break;case"percentage":d=!0;break;case"label-value1":case"label-value2":b=!0,c=!0;break;case"label-percentage1":case"label-percentage2":b=!0,d=!0}return{mainLabel:b,value:c,percentage:d}},computeOuterLabelCoords:function(){d3.selectAll(".labelGroup-outer").each(function(a,b){return l.getIdealOuterLabelPositions(b)}),l.resolveOuterLabelCollisions()},resolveOuterLabelCollisions:function(){var a=e.data.length;l.checkConflict(0,"clockwise",a),l.checkConflict(a-1,"anticlockwise",a)},checkConflict:function(a,b,c){var d=l.outerLabelGroupData[a].hs;if(!("clockwise"===b&&"right"!=d||"anticlockwise"===b&&"left"!=d)){var f="clockwise"===b?a+1:a-1,h=l.outerLabelGroupData[a],i=l.outerLabelGroupData[f],m={labelHeights:l.outerLabelGroupData[0].h,center:k.getPieCenter(),lineLength:g+e.labels.outer.pieDistance,heightChange:l.outerLabelGroupData[0].h+1};if("clockwise"===b)for(var n=0;a>=n;n++){var o=l.outerLabelGroupData[n];if(j.rectIntersect(o,i)){l.adjustLabelPos(f,h,m);break}}else for(var n=c-1;n>=a;n--){var o=l.outerLabelGroupData[n];if(j.rectIntersect(o,i)){l.adjustLabelPos(f,h,m);break}}l.checkConflict(f,b,c)}},adjustLabelPos:function(a,b,c){var d,e,f,g;g=b.y+c.heightChange,e=c.center.y-g,d=Math.sqrt(Math.abs(c.lineLength)>Math.abs(e)?c.lineLength*c.lineLength-e*e:e*e-c.lineLength*c.lineLength),f="right"===b.hs?c.center.x+d:c.center.x-d-l.outerLabelGroupData[a].w,f||console.log(b.hs,d),l.outerLabelGroupData[a].x=f,l.outerLabelGroupData[a].y=g},getIdealOuterLabelPositions:function(b){var c=a.getElementById("labelGroup"+b+"-outer").getBBox(),d=m.getSegmentAngle(b,{midpoint:!0}),f=k.getPieCenter(),h=f.x,i=f.y-(g+e.labels.outer.pieDistance),j=k.rotate(h,i,f.x,f.y,d),n="right";d>180?(j.x-=c.width+8,n="left"):j.x+=8,l.outerLabelGroupData[b]={x:j.x,y:j.y,w:c.width,h:c.height,hs:n}}},m={isOpening:!1,currentlyOpenSegment:null,create:function(){var a=d.insert("g","#title").attr("transform",k.getPieTranslateCenter).attr("class","pieChart");c=d3.svg.arc().innerRadius(f).outerRadius(g).startAngle(0).endAngle(function(a){var b=a.value/o*2*Math.PI;return b});var b=a.selectAll(".arc").data(e.data).enter().append("g").attr("class","arc"),h=e.effects.load.speed;"none"===e.effects.load.effect&&(h=0),b.append("path").attr("id",function(a,b){return"segment"+b}).style("fill",function(a,b){return e.colors[b]}).style("stroke",e.misc.colors.segmentStroke).style("stroke-width",1).transition().ease("cubic-in-out").duration(h).attr("data-index",function(a,b){return b}).attrTween("d",k.arcTween),d.selectAll("g.arc").attr("transform",function(a,b){var c=0;return b>0&&(c=m.getSegmentAngle(b-1)),"rotate("+c+")"})},addSegmentEventHandlers:function(){for(var b=a.getElementsByName("arc"),c=0;c<b.length;c++){var d=b[0];j.on(d,"click",function(a){return void console.log("clicked!")})}},onSegmentEvent:function(a,b,c){if($.isFunction(a))try{var d=parseInt(b.data("index"),10);a({segment:b[0],index:d,expanded:c,data:e.data[d]})}catch(f){}},openSegment:function(a){m.isOpening||(m.isOpening=!0,$(".expanded").length>0&&m.closeSegment($(".expanded")[0]),d3.select(a).transition().ease(e.effects.pullOutSegmentOnClick.effect).duration(e.effects.pullOutSegmentOnClick.speed).attr("transform",function(a){var b=c.centroid(a),d=b[0],f=b[1],g=Math.sqrt(d*d+f*f),h=parseInt(e.effects.pullOutSegmentOnClick.size,10);return"translate("+d/g*h+","+f/g*h+")"}).each("end",function(){m.currentlyOpenSegment=a,m.isOpening=!1,$(this).attr("class","expanded")}))},closeSegment:function(a){d3.select(a).transition().duration(400).attr("transform","translate(0,0)").each("end",function(){$(this).attr("class",""),m.currentlyOpenSegment=null})},getCentroid:function(a){var b=a.getBBox();return{x:b.x+b.width/2,y:b.y+b.height/2}},getSegmentAngle:function(a,b){var c,d=j.extend({compounded:!0,midpoint:!1},b),f=e.data[a].value;if(d.compounded){c=0;for(var g=0;a>=g;g++)c+=e.data[g].value}"undefined"==typeof c&&(c=f);var h=c/o*360;if(d.midpoint){var i=f/o*360;h-=i/2}return h},getPercentage:function(a){return Math.floor(e.data[a].value/o*100)}},n={components:{title:{exists:!1,h:0,w:0},subtitle:{exists:!1,h:0,w:0},footer:{exists:!1,h:0,w:0}},offscreenCoord:-1e4,trackComponents:function(){n.components.title.exists=""!==e.header.title.text,n.components.subtitle.exists=""!==e.header.subtitle.text,n.components.footer.exists=""!==e.footer.text},storeComponentDimensions:function(){if(n.components.title.exists){var a=j.getDimensions("title");n.components.title.h=a.h,n.components.title.w=a.w}if(n.components.subtitle.exists){var b=j.getDimensions("subtitle");n.components.subtitle.h=b.h,n.components.subtitle.w=b.w}},addTextElementsOffscreen:function(){n.components.title.exists&&n.addTitle(),n.components.subtitle.exists&&n.addSubtitle()},addTitle:function(){var a=d.selectAll(".title").data([e.header.title]);a.enter().append("text").attr("id","title").attr("x",n.offscreenCoord).attr("y",n.offscreenCoord).attr("class","title").attr("text-anchor",function(){var a;return a="top-center"===e.header.location||"pie-center"===e.header.location?"middle":"left"}).attr("fill",function(a){return a.color}).text(function(a){return a.text}).style("font-size",function(a){return a.fontSize}).style("font-family",function(a){return a.font})},positionTitle:function(){var a="top-left"===e.header.location?e.misc.canvasPadding.left:e.size.canvasWidth/2,b=e.misc.canvasPadding.top+n.components.title.h;if("pie-center"===e.header.location){var c=k.getPieCenter();if(b=c.y,n.components.subtitle.exists){var f=n.components.title.h+e.header.titleSubtitlePadding+n.components.subtitle.h;b=b-f/2+n.components.title.h}else b+=n.components.title.h/4}d.select("#title").attr("x",a).attr("y",b)},addSubtitle:function(){n.components.subtitle.exists&&d.selectAll(".subtitle").data([e.header.subtitle]).enter().append("text").attr("x",n.offscreenCoord).attr("y",n.offscreenCoord).attr("id","subtitle").attr("class","subtitle").attr("text-anchor",function(){var a;return a="top-center"===e.header.location||"pie-center"===e.header.location?"middle":"left"}).attr("fill",function(a){return a.color}).text(function(a){return a.text}).style("font-size",function(a){return a.fontSize}).style("font-family",function(a){return a.font})},positionSubtitle:function(){var a,b="top-left"===e.header.location?e.misc.canvasPadding.left:e.size.canvasWidth/2;if(n.components.title.exists){var c=n.components.title.h+e.header.titleSubtitlePadding+n.components.subtitle.h;if("pie-center"===e.header.location){var f=k.getPieCenter();a=f.y,a=a-c/2+c}else a=c}else if("pie-center"===e.header.location){var g=e.misc.canvasPadding.bottom+n.components.footer.h;a=(e.size.canvasHeight-g)/2+e.misc.canvasPadding.top+n.components.subtitle.h/2}else a=e.misc.canvasPadding.top+n.components.subtitle.h;d.select("#subtitle").attr("x",b).attr("y",a)},addFooter:function(){d.selectAll(".footer").data([e.footer]).enter().append("text").attr("x",n.offscreenCoord).attr("y",n.offscreenCoord).attr("id","footer").attr("class","footer").attr("text-anchor",function(){var a;return a="bottom-center"===e.footer.location?"middle":"bottom-right"===e.footer.location?"left":"left"}).attr("fill",function(a){return a.color}).text(function(a){return a.text}).style("font-size",function(a){return a.fontSize}).style("font-family",function(a){return a.font}),j.whenIdExists("footer",n.positionFooter)},positionFooter:function(){var a;a="bottom-left"===e.footer.location?e.misc.canvasPadding.left:"bottom-right"===e.footer.location?e.size.canvasWidth-n.components.footer.w-e.misc.canvasPadding.right:e.size.canvasWidth/2;var b=j.getDimensions("footer");n.components.footer.h=b.h,n.components.footer.w=b.w,d.select("#footer").attr("x",a).attr("y",e.size.canvasHeight-e.misc.canvasPadding.bottom)}},o=null,p=function(c,d){return i.initialCheck(c,d),b=a.getElementById(c),e=j.extend({},h,d),v(),{recreate:q,updateProp:u,destroy:r,getOpenPieSegment:s,openSegment:t}},q=function(){b.innerHTML="",v()},r=function(){b.innerHTML=""},s=function(){var a=m.currentlyOpenSegment;if(null!==a){var b=parseInt($(a).data("index"),10);return{element:a,index:b,data:e.data[b]}}return null},t=function(a){var a=parseInt(a,10);0>a||a>e.data.length-1||m.openSegment($("#segment"+a)[0])},u=function(a,b){switch(a){case"header.title.text":var c=j.processObj(e,a);j.processObj(e,a,b),$("#title").html(b),(""===c&&""!==b||""!==c&&""===b)&&this.recreate();break;case"header.subtitle.text":var c=j.processObj(e,a);j.processObj(e,a,b),$("#subtitle").html(b),(""===c&&""!==b||""!==c&&""===b)&&this.recreate();break;case"callbacks.onload":case"callbacks.onMouseoverSegment":case"callbacks.onMouseoutSegment":case"callbacks.onClickSegment":case"effects.pullOutSegmentOnClick.effect":case"effects.pullOutSegmentOnClick.speed":case"effects.pullOutSegmentOnClick.size":case"effects.highlightSegmentOnMouseover":case"effects.highlightLuminosity":j.processObj(e,a,b)}},v=function(){e.data=k.sortPieData(e.data.content,e.data.sortOrder),e.colors=j.initSegmentColors(e.data,e.misc.colors.segments),o=k.getTotalPieSize(e.data),j.addSVGSpace(b,e.size.canvasWidth,e.size.canvasHeight,e.misc.colors.background),n.trackComponents(),n.addTextElementsOffscreen(),n.addFooter();var a=k.computePieRadius();f=a.inner,g=a.outer;var c=[];n.components.title.exists&&c.push("title"),n.components.subtitle.exists&&c.push("subtitle"),n.components.footer.exists&&c.push("footer"),j.whenElementsExist(c,function(){n.storeComponentDimensions(),n.positionTitle(),n.positionSubtitle(),m.create();var a=l;a.add("inner",e.labels.inner.format),a.add("outer",e.labels.outer.format),a.positionLabelElements("inner",e.labels.inner.format),a.positionLabelElements("outer",e.labels.outer.format),a.computeOuterLabelCoords(),a.positionLabelGroups("outer"),a.computeLabelLinePositions(),e.labels.lines.enabled&&"none"!==e.labels.outer.format&&a.addLabelLines(),a.positionLabelGroups("inner"),a.fadeInLabelsAndLines(),m.addSegmentEventHandlers()})};window.d3pie=p}(document);